<ion-app>

  <ion-header>
    <ion-toolbar>
      <ion-title>
        Appointment details
      </ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <div class="column">
      <div class="upper-block">

        <div class="time-block ion-text-center">
          <div class="time">{{startedTime$ | async}}&nbsp;-&nbsp;{{finishedTime$ | async}}</div>
          <div class="ion-margin-vertical">{{currentDate$ | async}}</div>
        </div>

        <div class="flex-box ion-justify-content-center">
          <ion-button class="progress-button" (click)="onSetProgress()" color="success">
            {{progress[progressIndex$ | async]}}</ion-button>
        </div>

        <ion-item-divider class="divider-top"></ion-item-divider>

        <div class="flex-box ion-justify-content-around person-block">
          <div class="flex-box person">
            <ion-avatar class="ion-margin-bottom ion-text-center">
              <img src="https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y">
            </ion-avatar>
            <ion-label class="ion-text-center">
              <div class="name"> Zoe Walker</div>
              <div class="position"> grandmother</div>
            </ion-label>
          </div>
          <div class="flex-box person">
            <ion-avatar class="ion-margin-bottom ion-text-center">
              <img src="https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y">
            </ion-avatar>
            <ion-label class="ion-text-center">
              <div class="name"> Mina Ballard</div>
              <div class="position">psychologist</div>
            </ion-label>
          </div>
        </div>

        <ion-item-divider class="divider-bottom"></ion-item-divider>

      </div>

      <div class='row'>
        <div class='column border-right border-bottom' (click)="onStartedClick()"
          [ngClass]="(isStartedSelected$ | async) ? 'clicked' : ''">
          <div class="cell">
            <div class="cell-inner">
              <div>&nbsp;</div>
              <ion-icon name="time"></ion-icon>
            </div>
            <div class="cell-inner">
              <div class="name">Started</div>
              <div>{{startedTime$ | async}}</div>
            </div>
          </div>
        </div>
        <div class='column border-bottom' (click)="onFinishedClick()"
          [ngClass]="(isFinishedSelected$ | async) ? 'clicked' : ''">
          <div class="cell">
            <div class="cell-inner">
              <div>&nbsp;</div>
              <ion-icon name="time"></ion-icon>
            </div>
            <div class="cell-inner">
              <div class="name">Finished</div>
              <div>{{finishedTime$ | async}}</div>
            </div>
          </div>
        </div>
      </div>

      <div class='row'>
        <div class='column border-right border-bottom'>
          <div class="cell">
            <div class="cell-inner">
              <div>&nbsp;</div>
              <ion-icon name="hourglass"></ion-icon>
            </div>
            <div class="cell-inner">
              <div class="name">Billed</div>
              <div>0 hours</div>
            </div>
          </div>
        </div>
        <div class='column border-bottom'>
          <div class="cell">
            <div class="cell-inner">
              <div>&nbsp;</div>
              <img height="25px"
                src="data:image/png;base64,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">
            </div>
            <div class="cell-inner">
              <div class="name">Cost</div>
              <div>-</div>
            </div>
          </div>
        </div>
      </div>

      <div class="flex-box ion-justify-content-center swipe-button-block">
        <ion-button size="large" 
        (click)="showModal()" class="swipe-button" color="{{dialogShown ? 'primary' : 'danger'}}">
          <ion-icon name="arrow-forward" class="ion-padding-end"></ion-icon>
          <div> Swipe to finish appointment</div>
        </ion-button>
      </div>

      <div class="ion-padding-top">

        <ion-segment (ionChange)="segmentChanged($event)" value="logbook">
          <ion-segment-button value="logbook">
            <ion-label>Logbook</ion-label>
          </ion-segment-button>
          <ion-segment-button value="care-plan">
            <ion-label>Care Plan</ion-label>
          </ion-segment-button>
        </ion-segment>

        <div *ngFor="let item of (items$ | async)" class="item-block">
          <div class="item">
            <div class="title-block">
              <div class="checkbox">
                <ion-checkbox slot="end" [(ngModel)]="item.isChecked"></ion-checkbox>
              </div>
              <ion-text class="title">{{item.title}}</ion-text>
            </div>
            <div>
              <ion-button size="small" color="primary">All day</ion-button>
            </div>
          </div>
          <div class="description">{{item.description}}</div>
        </div>
      </div>

    </div>
  </ion-content>

</ion-app>